(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{219:function(e,t,o){Promise.resolve().then(o.bind(o,5925)),Promise.resolve().then(o.bind(o,4263)),Promise.resolve().then(o.bind(o,9403)),Promise.resolve().then(o.t.bind(o,9131,23)),Promise.resolve().then(o.t.bind(o,2471,23))},4263:function(e,t,o){"use strict";o.r(t),o.d(t,{MyContextProvider:function(){return a},useContextDispatch:function(){return i},useMyContext:function(){return u}});var n=o(7437),r=o(2265);let s=(0,r.createContext)(void 0),c=(0,r.createContext)(void 0);function a(e){let{children:t}=e,o=new Date,[a,u]=(0,r.useReducer)(l,f),i=async()=>{let e=localStorage.getItem("data");if(e){let t=JSON.parse(e);o.getTime()>t.expiry?(localStorage.clear(),fetch("/api/logout")):u({data:t.value,type:"firstRender"})}};return(0,r.useEffect)(()=>{i()},[]),(0,r.useEffect)(()=>{if(a!==f){let e={value:a,expiry:o.getTime()+36e5};localStorage.setItem("data",JSON.stringify(e))}},[a]),(0,n.jsx)(s.Provider,{value:a,children:(0,n.jsx)(c.Provider,{value:u,children:t})})}function u(){return(0,r.useContext)(s)}function i(){return(0,r.useContext)(c)}function l(e,t){switch(t.type){case"firstRender":return t.data;case"login":return{...e,loggedIn:!0,username:t.action.username,fullname:t.action.fullname,role:t.action.role,institutionname:t.action.institutionname};case"logout":return localStorage.removeItem("data"),{...f};case"slateInput":return{...e,toSlate:t.data};case"dsoSign":return{...e,dsoSign:t.data};case"userUpdate":return console.log(t.data),{...e,fullname:t.action.fullname,username:t.action.username};case"preProcessUpdate":return console.log("Pre-process Context",t.action),{...e,preProcessStatus:t.action};case"preProcessMaxCount":return console.log("Pre-processMaxCount Context",t.action),{...e,preProcessMaxCount:t.action};case"postProcessUpdate":return console.log("Post-process Context",t.action),{...e,postProcessStatus:t.action};case"preProcessorState":return{...e,preProcessorState:t.action};case"postProcessorState":return{...e,postProcessorState:t.action};default:throw Error("Unknown action: "+t.type)}}let f={username:"",fullname:"",role:"",loggedIn:!1,toSlate:"n",dsoSign:!1,preProcessStatus:0,postProcessStatus:0,preProcessMaxCount:0,preProcessorState:{},postProcessorState:{}}},9403:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return c}});var n=o(2265),r=o(3388),s=o(4263);function c(){let[e,t]=(0,n.useState)(""),o=(0,r.io)(e),c=(0,s.useContextDispatch)(),a=async()=>{let e=await fetch("/api/websocket"),o=await e.json();t(o.data)};return(0,n.useEffect)(()=>{a()},[]),(0,n.useEffect)(()=>{function t(){o.connect()}function n(){o.disconnect()}function r(e){console.log("PostProcess Update",e),c({type:"postProcessUpdate",action:e})}function s(e){console.log("PreProcess Update",e),c({type:"preProcessUpdate",action:e})}function a(e){console.log("PreProcess Max Count",e),c({type:"preProcessMaxCount",action:e})}return console.log("WShost",e),o.on("connect",t),o.on("disconnect",n),o.on("rom",r),o.on("preProcessor",s),o.on("preProcessorMaxCount",a),()=>{o.off("connect",t),o.off("disconnect",n),o.off("rom",r),o.off("preProcessor",s),o.off("preProcessor",a)}},[o,c]),null}},2471:function(){}},function(e){e.O(0,[943,971,596,744],function(){return e(e.s=219)}),_N_E=e.O()}]);