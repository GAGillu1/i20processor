(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{1971:function(e,a,n){Promise.resolve().then(n.bind(n,8461))},8461:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return w}});var s=n(7437),r=n(6230),t=n(841),i=n(6762),l=n(6454),o=n(4033),u=n(4263),c=n(5925),d=n(1396),m=n.n(d),h=n(9805),x=n(494),f=n(2265),p=n(7263);function g(){let e=(0,o.useRouter)(),[a,n]=(0,f.useState)(!0),[u,d]=(0,f.useState)(!1);async function m(a){try{d(!0);let n=await fetch("/api/login",{method:"PUT",body:(0,p.Z)(a)});if(!n.ok)throw n;let s=await n.json();c.toast.success(s.message),e.push("/login")}catch(a){let e=await a.json();c.toast.error(e.message)}finally{d(!1)}}return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(h.u,{appear:!0,show:a,as:f.Fragment,children:(0,s.jsxs)(x.V,{as:"div",className:"relative z-10",onClose:function(){n(!1),setTimeout(()=>e.push("/login"),200)},children:[(0,s.jsx)(h.u.Child,{as:f.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,s.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,s.jsx)(h.u.Child,{as:f.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsxs)(x.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,s.jsx)(x.V.Title,{as:"h3",className:"text-2xl font-medium text-gray-800 leading-6 mb-2",children:"Forgot Password?"}),(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)(r.J9,{initialValues:l.w4,validationSchema:i.Ju,onSubmit:e=>m(e),children:(0,s.jsxs)(r.l0,{children:[(0,s.jsx)("label",{htmlFor:"username",children:"Username"}),(0,s.jsx)(r.gN,{name:"username",placeholder:"john12",autoFocus:!0,className:"my-1"}),(0,s.jsx)(t.Z,{name:"username"}),(0,s.jsxs)("button",{type:"submit",className:"my-2",children:[(0,s.jsx)("span",{className:"animate-ping w-2 h-2 bg-indigo-700 rounded-full absolute",hidden:!u}),(0,s.jsx)("span",{className:" w-2 h-2 bg-indigo-900 rounded-full",hidden:!u}),u?"Sending":"Send My Password"]})]})}),(0,s.jsx)(x.V.Description,{as:"p",className:"text-sm text-slate-700",children:"The new password will be sent to your email address."})]})]})})})})]})})})}var y=n(7308),w=e=>{let{searchParams:a}=e,n=(0,o.useRouter)(),d=(0,u.useContextDispatch)(),h=a.forgotPassword,[x,p]=(0,f.useState)(!1);async function w(e){try{p(!0);let a=await fetch("/api/login",{method:"POST",headers:{Authorization:"Basic "+btoa("".concat(e.username,":").concat(e.password))}});if(!a.ok)throw a;let s=await a.json();c.default.success(s.message),d({type:"login",action:s.data}),n.push("/")}catch(a){let e=await a.json();c.default.error(e.message)}finally{p(!1)}}return(0,s.jsx)("main",{className:"  bg-indigo-200 ",children:(0,s.jsxs)("div",{className:"grid grid-cols-5 w-[90%] min-h-screen mx-auto",children:[(0,s.jsx)("div",{className:"col-span-3 flex items-center ",children:(0,s.jsxs)("div",{className:"text-indigo-800 font-semibold",children:[(0,s.jsx)("p",{className:"leading-none",children:"Welcome to,"}),(0,s.jsx)("h1",{className:"text-9xl font-black tracking-tight",children:"I-20 Processor"}),(0,s.jsx)("p",{children:"One stop for all the I-20 needs."})]})}),(0,s.jsx)(r.J9,{initialValues:l.Gw,validationSchema:i.dm,onSubmit:e=>w(e),children:(0,s.jsxs)("section",{className:"p-12 bg-gray-50  my-auto rounded-lg  font-semibold text-gray-700 w-[75%] col-span-2 justify-self-end",children:[(0,s.jsx)("h2",{className:"text-5xl mb-6 px-0",children:"Login"}),(0,s.jsxs)(r.l0,{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"username",children:"Username"}),(0,s.jsx)(r.gN,{name:"username",placeholder:"john12",autoFocus:!0}),(0,s.jsx)(t.Z,{name:"username"}),(0,s.jsx)("label",{htmlFor:"password",children:"Password"}),(0,s.jsx)(r.gN,{name:"password",type:"password"}),(0,s.jsx)(t.Z,{name:"password"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsx)(m(),{className:"underline text-sm text-slate-700 font-normal",href:"/login?forgotPassword=true",children:"Forgot Password?"}),(0,s.jsx)(y.xM,{loading:x,loadingMsg:"Processing",action:"Login"})]})]})]})}),h&&(0,s.jsx)(g,{})]})})}},841:function(e,a,n){"use strict";var s=n(7437),r=n(2005),t=n(6230);a.Z=e=>{let{...a}=e;return(0,s.jsx)(t.Bc,{...a,render:e=>(0,s.jsx)("div",{className:a.className,children:(0,s.jsxs)("div",{className:"flex gap-2 text-red-700",children:[(0,s.jsx)(r.Pz,{className:"w-6 h-6"}),(0,s.jsx)("div",{children:e})]})})})}},7263:function(e,a,n){"use strict";function s(e){let a=new FormData;for(let[n,s]of Object.entries(e))a.append(n,s);return a}n.d(a,{Z:function(){return s}})},6454:function(e,a,n){"use strict";n.d(a,{Gw:function(){return o},Jv:function(){return d},U0:function(){return i},Us:function(){return h},Wj:function(){return r},Yi:function(){return c},bi:function(){return s},dr:function(){return l},mI:function(){return t},uv:function(){return m},w4:function(){return u}});let s={username:"",fullname:"",email:"",role:"USER"},r={username:"",fullname:"",email:"",role:"",signature:""},t={sign:"",dso:"",split:"",i20File:""},i={i20Type:"initI20",dsoName:"",i20File:"",issmFile:"",slateFile:"",toSlate:"n",prog:"ug"},l={x:80,y:180,length:160,width:60,signFile:"",action:""},o={username:"",password:""},u={username:""},c={cPwd:"",nPwd:"",cNPwd:""},d={username:"",fullname:"",email:""},m={type:"",username:"",password:"",endpoint:""},h={vpnUsername:"",vpnPassword:"",issmUsername:"",issmPassword:"",excelFile:"",instance:""}},7308:function(e,a,n){"use strict";n.d(a,{IA:function(){return o},PI:function(){return l},S2:function(){return c},ZD:function(){return d},vN:function(){return u},xM:function(){return m}});var s=n(7437),r=n(4263),t=n(2265),i=n(2838);let l=e=>{let{...a}=e,n=(0,r.useContextDispatch)();return(0,s.jsx)("select",{...a,onChange:e=>{a.form.setFieldValue(a.field.name,e.target.value),n({type:"slateInput",data:e.target.value})}})},o=e=>{let{...a}=e;return(0,s.jsx)("input",{type:"checkbox",onChange:e=>{a.form.setFieldValue(a.field.name,e.target.value)},...a})},u=e=>{let{...a}=e,n=(0,r.useContextDispatch)();return(0,s.jsx)("input",{type:"checkbox",onChange:e=>{a.form.setFieldValue(a.field.name,e.target.value),n({type:"dsoSign",data:e.target.checked})},...a})},c=e=>{let{...a}=e;return(0,s.jsx)("input",{type:"file",...a,onChange:e=>{a.form.setFieldValue(a.field.name,e.currentTarget.files[0])}})},d=e=>{let{...a}=e,[n,r]=(0,t.useState)(a.active),l=()=>{r(!n),a.form.setFieldValue(a.field.name,!n)};return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("label",{children:n?"Active":"Inactive"}),(0,s.jsx)("div",{className:"group ".concat(a.disabled?"opacity-70 group-hover:transition-none":""),children:(0,s.jsxs)(i.r,{checked:n,onChange:()=>l(),className:"".concat(n?"bg-green-600 group-hover:bg-green-700":"bg-red-600 group-hover:bg-red-700"," relative inline-flex h-6 w-12 items-center rounded-full transition duration-150"),disabled:a.disabled,children:[(0,s.jsx)("span",{className:"sr-only",children:a.name}),(0,s.jsx)("span",{className:"".concat(n?"translate-x-3":"-translate-x-3"," inline-block h-4 w-4 transform rounded-full bg-white transition group-hover:scale-125 duration-150")})]})})]})},m=e=>{let{...a}=e;return!a.hidden&&(0,s.jsxs)("button",{type:"submit",disabled:a.loading,children:[(0,s.jsx)("span",{className:"animate-ping w-2 h-2 bg-indigo-700 rounded-full absolute",hidden:!a.loading}),(0,s.jsx)("span",{className:"w-2 h-2 bg-indigo-900 rounded-full",hidden:!a.loading}),!a.loading&&a.children,a.loading?"".concat(a.loadingMsg):"".concat(a.action)]})}},6762:function(e,a,n){"use strict";n.d(a,{IK:function(){return r},JI:function(){return t},Ju:function(){return u},OC:function(){return d},Qh:function(){return c},dm:function(){return o},eF:function(){return i},nf:function(){return l},uz:function(){return m}});var s=n(5691);let r=s.Ry({username:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a username"),fullname:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter fullname"),email:s.Z_().email().max(50,"You may only enter upto 50 characters").required("Please enter a valid email address")}),t=s.Ry({dsoName:s.nK().required("Please select a DSO"),i20File:s.nK().required("Please select a I20 file"),issmFile:s.nK().required("Please select a issm file"),slateFile:s.nK().required("Please select a slate file")}),i=s.Ry({username:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),fullname:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Full name"),email:s.Z_().email().required("Please enter a email address").max(50,"You may only enter upto 50 characters")}),l=s.Ry({x:s.Rx().required("Please enter x-coordinates"),y:s.Rx().required("Please enter y-coordinates"),length:s.Rx().required("Please enter length"),width:s.Rx().required("Please enter width"),signFile:s.nK().required("Please attach a signature"),action:s.Z_().required("Please select an action")}),o=s.Ry({username:s.Z_().required("Please provide the username"),password:s.Z_().required("Please provide the password")}),u=s.Ry({username:s.Z_().required("Please provide username")}),c=s.Ry({cPwd:s.Z_().max(50,"You may only enter upto 50 characters").required("Please provide current password"),nPwd:s.Z_().max(50,"You may only enter upto 50 characters").required("Please provide new password"),cNPwd:s.Z_().label("nPwd").oneOf([s.iH("nPwd"),""],"Passwords must match").max(50,"You may only enter upto 50 characters").required("Please provide confirm new password")}),d=s.Ry({type:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Instance name"),username:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),password:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Password"),endpoint:s.Z_().required("Please enter a endpoint address")}),m=s.Ry({vpnUsername:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a VPN username"),vpnPassword:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter VPN Password"),issmUsername:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter ISSM Username"),issmPassword:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter ISSM Password"),excelFile:s.nK().required("Please attach the Excel file"),instance:s.Z_().required("Please select an Instance")})}},function(e){e.O(0,[685,910,452,146,971,596,744],function(){return e(e.s=1971)}),_N_E=e.O()}]);