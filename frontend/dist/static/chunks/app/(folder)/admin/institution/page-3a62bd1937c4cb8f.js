(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{6058:function(e,t,a){Promise.resolve().then(a.bind(a,56))},56:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var n=a(7437),s=a(2265),i=a(1396),r=a.n(i),l=a(6019),o=a(2005),d=a(5925),c=a(4033),u=e=>{let{...t}=e,a=(0,c.useSearchParams)(),i=t.institutionList.filter(e=>{var a;return(null===(a=e.institutionName)||void 0===a?void 0:a.toLowerCase().includes(t.search.toLowerCase()))||t.filter===e.institutionName});return(0,n.jsx)(s.Fragment,{children:i.length>0?i.map(e=>(0,n.jsx)(r(),{className:"listItem "+"".concat(a.get("institution")===e.institutionName?"bg-indigo-300":"bg-indigo-100"),href:"/admin/institution/?institution="+e.institutionName,children:e.institutionName},e.institutionName)):(0,n.jsx)("p",{className:"text-sm tracking-wide text-slate-700",children:"No Institutions found!"})})},m=a(6230),x=a(6375),h=a(7263),g=a(6762),p=a(6454),f=a(7308),j=()=>{let[e,t]=(0,s.useState)(p.jd),a=(0,c.useSearchParams)().get("institution"),[i,l]=(0,s.useState)(!0),[u,j]=(0,s.useState)(!0);(0,s.useEffect)(()=>{l(!0),N(a),j(!0)},[a]);let y=async e=>{try{console.log("Institution Info",e);let t=await fetch("/api/institution/"+a,{method:"PUT",body:(0,h.Z)(e)});if(!t.ok)throw t;let n=await t.json();console.log(n),d.toast.success(n.message)}catch(t){let e=await t.json();d.toast.error(e.message)}},N=async e=>{await fetch("/api/institution/"+e).then(e=>e.json()).then(e=>{t(e.data)}).then(()=>{l(!1)})};return(0,n.jsxs)("section",{children:[(0,n.jsx)("h1",{className:"text-center font-bold text-xl text-slate-700 py-2",children:"Institution Info"}),!i&&(0,n.jsx)(m.J9,{initialValues:e,validationSchema:g.uM,onSubmit:e=>y(e),children:(0,n.jsx)("section",{children:(0,n.jsxs)(m.l0,{children:[(0,n.jsx)("label",{htmlFor:"institutionName",children:"Institution Name"}),(0,n.jsx)(m.gN,{name:"institutionName",readOnly:u}),(0,n.jsx)(x.Z,{name:"institutionName"}),(0,n.jsx)("label",{htmlFor:"crm",children:"CRM"}),(0,n.jsx)(m.gN,{name:"crm",readOnly:u}),(0,n.jsx)(x.Z,{name:"crm"}),(0,n.jsx)("h3",{className:"pt-3 text-center",children:"Primary Contact"}),(0,n.jsx)("label",{htmlFor:"adminFullName",children:"Admin Full Name"}),(0,n.jsx)(m.gN,{name:"adminFullName",readOnly:u}),(0,n.jsx)(x.Z,{name:"adminFullName"}),(0,n.jsx)("label",{htmlFor:"adminDisplayName",children:"Admin Display Name"}),(0,n.jsx)(m.gN,{name:"adminDisplayName",readOnly:u}),(0,n.jsx)(x.Z,{name:"adminDisplayName"}),(0,n.jsx)("label",{htmlFor:"email",children:"Email"}),(0,n.jsx)(m.gN,{name:"email",type:"email",readOnly:u}),(0,n.jsx)(x.Z,{name:"email"}),(0,n.jsx)("label",{htmlFor:"adminContact",children:"Admin Contact"}),(0,n.jsx)(m.gN,{name:"adminContact",readOnly:u}),(0,n.jsx)(x.Z,{name:"adminContact"}),(0,n.jsxs)("div",{className:"flex gap-2 items-center justify-end pt-4",children:[(0,n.jsx)(r(),{href:"/admin/institution/?institution=".concat(a,"&logs=true"),className:"bg-indigo-100 rounded px-4 py-2 flex items-center gap-2 hover:bg-indigo-50 text-indigo-900 font-semibold tracking-wide",children:"Institution Logs"}),(0,n.jsxs)("button",{type:"button",className:"bg-indigo-100 rounded px-4 py-2 flex items-center gap-2 hover:bg-indigo-50 text-indigo-900 font-semibold tracking-wide ".concat(u?"":" hidden"),onClick:()=>j(!u),children:[(0,n.jsx)(o.dY,{}),"Edit"]}),(0,n.jsx)(f.xM,{hidden:u,loading:i,loadingMsg:"Saving",action:"Save",children:(0,n.jsx)(o.N,{})})]})]})})})]})},y=()=>{let[e,t]=(0,s.useState)(!1),a=async e=>{try{console.log("New Institution",e),t(!0);let a=await fetch("/api/institution",{method:"POST",body:(0,h.Z)(e)});if(!a.ok)throw a;let n=await a.json();console.log(n),d.default.success(n.message)}catch(t){let e=await t.json();d.default.error(e.message)}finally{t(!1)}};return(0,n.jsxs)("section",{children:[(0,n.jsx)("h2",{className:"text-center",children:"Add New Institution"}),(0,n.jsx)(m.J9,{initialValues:p.jd,validationSchema:g.uM,onSubmit:e=>a(e),children:(0,n.jsx)("section",{children:(0,n.jsxs)(m.l0,{children:[(0,n.jsx)("label",{htmlFor:"institutionName",children:"Institution Name"}),(0,n.jsx)(m.gN,{name:"institutionName"}),(0,n.jsx)(x.Z,{name:"institutionName"}),(0,n.jsx)("label",{htmlFor:"adminFullName",children:"Admin Full Name"}),(0,n.jsx)(m.gN,{name:"adminFullName"}),(0,n.jsx)(x.Z,{name:"adminDisplayName"}),(0,n.jsx)("label",{htmlFor:"adminDisplayName",children:"Admin Display Name"}),(0,n.jsx)(m.gN,{name:"adminDisplayName"}),(0,n.jsx)(x.Z,{name:"adminFullName"}),(0,n.jsx)("label",{htmlFor:"email",children:"Email"}),(0,n.jsx)(m.gN,{name:"email",type:"email"}),(0,n.jsx)(x.Z,{name:"email"}),(0,n.jsx)("label",{htmlFor:"crm",children:"CRM"}),(0,n.jsx)(m.gN,{name:"crm"}),(0,n.jsx)(x.Z,{name:"crm"}),(0,n.jsx)("label",{htmlFor:"adminContact",children:"Admin Contact"}),(0,n.jsx)(m.gN,{name:"adminContact",component:f.P0}),(0,n.jsx)(x.Z,{name:"adminContact"}),(0,n.jsx)("div",{className:"flex items-center justify-end  pt-2",children:(0,n.jsx)(f.xM,{loading:e,loadingMsg:"Adding",action:"Add"})})]})})})]})},N=a(7916),w=a(7801);let v=e=>{let{value:t}=e;return(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsx)("div",{className:"p-1 w-20 text-center rounded text-white text-sm tracking-wide ".concat(t?"bg-green-600":"bg-red-600"),children:t?"Success":"Failure"})})};var P=()=>{let[e,t]=(0,s.useState)(void 0),a=(0,c.useSearchParams)(),i=a.get("institution"),r=e=>e.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"}),[l,o]=(0,s.useState)([]);(0,s.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("api/logs/"+i);if(!e.ok)throw e;let t=await e.json();console.log("logData",t),o(t.data)}catch(t){let e=await t.json();d.toast.error(e.message)}};return(0,n.jsxs)("main",{className:"w-[80%] mx-auto",children:[(0,n.jsxs)("h2",{children:[i," Logs"]}),(0,n.jsx)("section",{className:"bg-white rounded-lg p-1",children:(0,n.jsxs)(N.w,{value:l,paginator:!0,rows:18,expandedRows:e,onRowToggle:e=>t(e.data),rowExpansionTemplate:e=>(0,n.jsxs)("div",{className:"p-2",children:[(0,n.jsx)("h3",{children:"Processed I-20s"}),"ISSM to Slate"===e.processor?(0,n.jsxs)("div",{className:"",children:[" ",e.processedMsg]}):(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)(N.w,{children:[(0,n.jsx)(w.s,{field:"admissionId",header:"Admission Id"}),(0,n.jsx)(w.s,{sortable:!0,field:"result",header:"Status"})]})})]}),children:[(0,n.jsx)(w.s,{expander:!0,style:{width:"5rem"}}),(0,n.jsx)(w.s,{field:"date",header:"Date",sortable:!0,body:e=>r(new Date(e.processedDate)),className:"w-[25%] px-2"}),(0,n.jsx)(w.s,{field:"processedBy",header:"User",className:"w-[25%] px-2"}),(0,n.jsx)(w.s,{field:"result",header:"Result",className:"w-[25%] px-2",body:e=>(0,n.jsx)(v,{value:e.result})}),(0,n.jsx)(w.s,{field:"processor",header:"Tool",className:"w-[25%] px-2"})]})})]})},b=e=>{let{searchParams:t}=e,[a,i]=(0,s.useState)([]),[c,m]=(0,s.useState)(""),x=null==t?void 0:t.institution,h=null==t?void 0:t.logs;(0,s.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await fetch("/api/institution");if(!e.ok)throw e;let t=await e.json();i(t.data)}catch(t){let e=await t.json();d.toast.error(e.message)}};return h?(0,n.jsx)(P,{}):(0,n.jsxs)("main",{className:"w-[95%] mx-auto",children:[(0,n.jsx)("h1",{className:" p-4 font-bold text-slate-700 text-xl",children:"Institution List"}),(0,n.jsxs)("section",{className:"grid grid-cols-2 gap-2 h-[70vh]",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg px-4 pb-4 pt-2",children:[(0,n.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,n.jsxs)(r(),{href:"/admin/institution",className:"navLink bg-indigo-100 w-44 text-center text-indigo-900",children:[(0,n.jsx)(o.dt,{}),"Add Institution"]}),(0,n.jsxs)(r(),{href:"/logs",className:"navLink bg-indigo-100 w-24 text-center text-indigo-900",children:[(0,n.jsx)(o.I$,{}),"Logs"]})]}),(0,n.jsx)("div",{className:"my-2 bg-slate-200 h-1 rounded-full"}),(0,n.jsx)("div",{className:"group",children:(0,n.jsxs)("div",{className:"searchBar",children:[(0,n.jsx)(o.W1,{}),(0,n.jsx)("input",{type:"text",placeholder:"Search Institution ...",onChange:e=>m(e.target.value)})]})}),(0,n.jsx)("ul",{className:"flex flex-col gap-2 mt-4 overflow-y-auto h-[55vh]",children:(0,n.jsx)(u,{institutionList:a,search:c})})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 ",children:[x&&(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)(l.Z,{}),children:(0,n.jsx)(j,{})}),!x&&(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)(l.Z,{}),children:(0,n.jsx)(y,{})})]})]})]})}},6019:function(e,t,a){"use strict";var n=a(7437);t.Z=()=>(0,n.jsx)("h1",{children:"Loading..."})},6375:function(e,t,a){"use strict";var n=a(7437),s=a(2005),i=a(6230);t.Z=e=>{let{...t}=e;return(0,n.jsx)(i.Bc,{...t,render:e=>(0,n.jsx)("div",{className:t.className,children:(0,n.jsxs)("div",{className:"flex gap-2 text-red-700",children:[(0,n.jsx)(s.Pz,{className:"w-6 h-6"}),(0,n.jsx)("div",{children:e})]})})})}},7263:function(e,t,a){"use strict";function n(e){let t=new FormData;for(let[a,n]of Object.entries(e))t.append(a,n);return t}a.d(t,{Z:function(){return n}})},6454:function(e,t,a){"use strict";a.d(t,{Gw:function(){return o},Jv:function(){return u},U0:function(){return r},Us:function(){return x},Wj:function(){return s},Yi:function(){return c},bi:function(){return n},dr:function(){return l},jd:function(){return h},mI:function(){return i},uv:function(){return m},w4:function(){return d}});let n={username:"",fullname:"",email:"",role:"USER"},s={username:"",fullname:"",email:"",role:"",signature:""},i={sign:"",dso:"",split:"",i20File:""},r={i20Type:"initI20",dsoName:"",i20File:"",issmFile:"",slateFile:"",toSlate:"n",prog:"ug"},l={x:80,y:180,length:160,width:60,signFile:"",action:""},o={username:"",password:""},d={username:""},c={cPwd:"",nPwd:"",cNPwd:""},u={username:"",fullname:"",email:""},m={type:"",username:"",password:"",endpoint:""},x={vpnUsername:"",vpnPassword:"",issmUsername:"",issmPassword:"",excelFile:"",instance:""},h={institutionName:"",adminFullName:"",email:"",crm:"",adminDisplayName:"",adminContact:""}},7308:function(e,t,a){"use strict";a.d(t,{IA:function(){return c},P0:function(){return g},PI:function(){return d},S2:function(){return m},ZD:function(){return x},vN:function(){return u},xM:function(){return h}});var n=a(7437),s=a(9850),i=a(2265),r=a(2838),l=a(5794),o=a.n(l);let d=e=>{let{...t}=e,a=(0,s.useContextDispatch)();return(0,n.jsx)("select",{...t,onChange:e=>{t.form.setFieldValue(t.field.name,e.target.value),a({type:"slateInput",data:e.target.value})}})},c=e=>{let{...t}=e;return(0,n.jsx)("input",{type:"checkbox",onChange:e=>{t.form.setFieldValue(t.field.name,e.target.value)},...t})},u=e=>{let{...t}=e,a=(0,s.useContextDispatch)();return(0,n.jsx)("input",{type:"checkbox",onChange:e=>{t.form.setFieldValue(t.field.name,e.target.value),a({type:"dsoSign",data:e.target.checked})},...t})},m=e=>{let{...t}=e;return(0,n.jsx)("input",{type:"file",...t,onChange:e=>{t.form.setFieldValue(t.field.name,e.currentTarget.files[0])}})},x=e=>{let{...t}=e,[a,s]=(0,i.useState)(t.active),l=()=>{s(!a),t.form.setFieldValue(t.field.name,!a)};return(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)("label",{children:a?"Active":"Inactive"}),(0,n.jsx)("div",{className:"group ".concat(t.disabled?"opacity-70 group-hover:transition-none":""),children:(0,n.jsxs)(r.r,{checked:a,onChange:()=>l(),className:"".concat(a?"bg-green-600 group-hover:bg-green-700":"bg-red-600 group-hover:bg-red-700"," relative inline-flex h-6 w-12 items-center rounded-full transition duration-150"),disabled:t.disabled,children:[(0,n.jsx)("span",{className:"sr-only",children:t.name}),(0,n.jsx)("span",{className:"".concat(a?"translate-x-3":"-translate-x-3"," inline-block h-4 w-4 transform rounded-full bg-white transition group-hover:scale-125 duration-150")})]})})]})},h=e=>{let{...t}=e;return!t.hidden&&(0,n.jsxs)("button",{type:"submit",disabled:t.loading,children:[(0,n.jsx)("span",{className:"animate-ping w-2 h-2 bg-indigo-700 rounded-full absolute",hidden:!t.loading}),(0,n.jsx)("span",{className:"w-2 h-2 bg-indigo-900 rounded-full",hidden:!t.loading}),!t.loading&&t.children,t.loading?"".concat(t.loadingMsg):"".concat(t.action)]})},g=e=>{let{...t}=e;return(0,n.jsx)(o(),{country:"us",specialLabel:"",isValid:!0,defaultErrorMessage:"Please enter a valid phone number",onChange:e=>{t.form.setFieldValue(t.field.name,e)},...t})}},6762:function(e,t,a){"use strict";a.d(t,{IK:function(){return s},JI:function(){return i},Ju:function(){return d},OC:function(){return u},Qh:function(){return c},dm:function(){return o},eF:function(){return r},nf:function(){return l},uM:function(){return x},uz:function(){return m}});var n=a(5691);let s=n.Ry({username:n.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a username"),fullname:n.Z_().max(50,"You may only enter upto 50 characters").required("Please enter fullname"),email:n.Z_().email().max(50,"You may only enter upto 50 characters").required("Please enter a valid email address")}),i=n.Ry({dsoName:n.nK().required("Please select a DSO"),i20File:n.nK().required("Please select a I20 file"),issmFile:n.nK().required("Please select a issm file"),slateFile:n.nK().required("Please select a slate file")}),r=n.Ry({username:n.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),fullname:n.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Full name"),email:n.Z_().email().required("Please enter a email address").max(50,"You may only enter upto 50 characters")}),l=n.Ry({x:n.Rx().required("Please enter x-coordinates"),y:n.Rx().required("Please enter y-coordinates"),length:n.Rx().required("Please enter length"),width:n.Rx().required("Please enter width"),signFile:n.nK().required("Please attach a signature"),action:n.Z_().required("Please select an action")}),o=n.Ry({username:n.Z_().email("Please enter a valid email address").required("Please provide the email"),password:n.Z_().required("Please provide the password")}),d=n.Ry({username:n.Z_().email("Please enter a valid email address").required("Please provide email address")}),c=n.Ry({cPwd:n.Z_().max(50,"You may only enter upto 50 characters").required("Please provide current password"),nPwd:n.Z_().max(50,"You may only enter upto 50 characters").required("Please provide new password"),cNPwd:n.Z_().label("nPwd").oneOf([n.iH("nPwd"),""],"Passwords must match").max(50,"You may only enter upto 50 characters").required("Please provide confirm new password")}),u=n.Ry({type:n.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Instance name"),username:n.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),password:n.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Password"),endpoint:n.Z_().required("Please enter a endpoint address")}),m=n.Ry({vpnUsername:n.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a VPN username"),vpnPassword:n.Z_().max(50,"You may only enter upto 50 characters").required("Please enter VPN Password"),issmUsername:n.Z_().max(20,"You may only enter upto 20 characters").required("Please enter ISSM Username"),issmPassword:n.Z_().max(50,"You may only enter upto 50 characters").required("Please enter ISSM Password"),excelFile:n.nK().required("Please attach the Excel file"),instance:n.Z_().required("Please select an Instance")}),x=n.Ry({institutionName:n.Z_().max(30,"You may only enter upto 30 characters").required("Please enter a University name"),adminFullName:n.Z_().max(30,"You may only enter upto 30 characters").required("Please enter admin full name"),adminDisplayName:n.Z_().max(30,"You may only enter upto 30 characters").required("Please enter a Password"),email:n.Z_().email().required("Please enter a email address").max(50,"You may only enter upto 50 characters"),crm:n.Z_().max(30,"You may only enter upto 30 characters").required("Please enter a Password"),adminContact:n.nK().required("Please enter a Phone number")})},1396:function(e,t,a){e.exports=a(6685)},4033:function(e,t,a){e.exports=a(8165)}},function(e){e.O(0,[651,685,510,981,194,971,596,744],function(){return e(e.s=6058)}),_N_E=e.O()}]);