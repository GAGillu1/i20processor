(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{2368:function(e,n,a){Promise.resolve().then(a.bind(a,2352))},2352:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return w}});var t=a(7437),s=a(2265),r=a(1396),i=a.n(r),l=a(6019),o=a(2005),c=a(841),d=a(6454),u=a(6762),m=a(6230),h=a(7308),x=a(7263),p=a(5925),f=()=>{let[e,n]=(0,s.useState)(!1),a=async e=>{try{console.log(e),n(!0);let a=await fetch("/api/instance",{method:"POST",body:(0,x.Z)(e)});if(!a.ok)throw a;let t=await a.json();console.log(t),p.toast.success(t.message)}catch(n){let e=await n.json();p.toast.error(e.message)}finally{n(!1)}};return(0,t.jsx)("section",{children:(0,t.jsx)(m.J9,{initialValues:d.uv,validationSchema:u.OC,onSubmit:e=>a(e),children:(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-center",children:"Add New Instance"}),(0,t.jsxs)(m.l0,{children:[(0,t.jsx)("label",{htmlFor:"type",children:"Instance Name:"}),(0,t.jsx)(m.gN,{name:"type"}),(0,t.jsx)(c.Z,{name:"type"}),(0,t.jsx)("label",{htmlFor:"username",children:"Username:"}),(0,t.jsx)(m.gN,{name:"username"}),(0,t.jsx)(c.Z,{name:"username"}),(0,t.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,t.jsx)(m.gN,{name:"password"}),(0,t.jsx)(c.Z,{name:"password"}),(0,t.jsx)("label",{htmlFor:"endpoint",children:"JSON Endpoint:"}),(0,t.jsx)(m.gN,{name:"endpoint",as:"textarea"}),(0,t.jsx)(c.Z,{name:"endpoint",className:"col-start-2 col-span-2"}),(0,t.jsx)("div",{className:"flex items-center justify-end  pt-2",children:(0,t.jsx)(h.xM,{loading:e,loadingMsg:"Adding",action:"Register"})})]})]})})})},g=a(4033),j=e=>{let{...n}=e,a=(0,g.useSearchParams)(),r=n.instanceList.filter(e=>{var a;return null===(a=e.type)||void 0===a?void 0:a.toLowerCase().includes(n.search.toLowerCase())});return(0,t.jsx)(s.Fragment,{children:r.length>0?r.map(e=>(0,t.jsx)(i(),{className:"instanceItem "+"".concat(a.get("instance")===e.type?"bg-indigo-300":"bg-indigo-100"),href:"/admin/instance/?instance="+e.type,children:e.type},e.type)):(0,t.jsx)("p",{className:"text-sm tracking-wide text-slate-700",children:"No Instances found!"})})},y=()=>{let[e,n]=(0,s.useState)(d.uv),a=(0,g.useSearchParams)().get("instance"),[r,i]=(0,s.useState)(!0),[l,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{i(!0),j(a),h(!0)},[a]);let f=async e=>{try{console.log("Instance Info",e);let n=await fetch("/api/instance/"+a,{method:"PUT",body:(0,x.Z)(e)});if(!n.ok)throw n;let t=await n.json();console.log(t),p.toast.success(t.message)}catch(n){let e=await n.json();p.toast.error(e.message)}},j=async e=>{await fetch("/api/instance/"+e).then(e=>e.json()).then(e=>{n(e.data)}).then(()=>{i(!1)})};return(0,t.jsxs)("section",{children:[(0,t.jsx)("h1",{className:"text-center font-bold text-xl text-slate-700 py-2",children:"Instance Info"}),!r&&(0,t.jsx)(m.J9,{initialValues:e,validationSchema:u.OC,onSubmit:e=>f(e),children:(0,t.jsx)("section",{children:(0,t.jsxs)(m.l0,{children:[(0,t.jsx)("label",{htmlFor:"type",children:"Instance Type"}),(0,t.jsx)(m.gN,{name:"type",readOnly:!0}),(0,t.jsx)(c.Z,{name:"type"}),(0,t.jsx)("label",{htmlFor:"username",children:"Username"}),(0,t.jsx)(m.gN,{name:"username",readOnly:l}),(0,t.jsx)(c.Z,{name:"username"}),(0,t.jsx)("label",{htmlFor:"password",children:"Password"}),(0,t.jsx)(m.gN,{name:"password",type:"password",readOnly:l}),(0,t.jsx)(c.Z,{name:"password"}),(0,t.jsx)("label",{htmlFor:"endpoint",children:"Endpoint"}),(0,t.jsx)(m.gN,{name:"endpoint",as:"textarea",readOnly:!0}),(0,t.jsx)(c.Z,{name:"endpoint"}),(0,t.jsxs)("div",{className:"flex gap-2 items-center justify-end pt-4",children:[(0,t.jsxs)("button",{type:"button",className:"bg-indigo-100 rounded px-4 py-2 flex items-center gap-2 hover:bg-indigo-50 text-indigo-900 font-semibold tracking-wide ".concat(l?"":" hidden"),onClick:()=>h(!l),children:[(0,t.jsx)(o.dY,{}),"Edit"]}),(0,t.jsxs)("button",{type:"submit",hidden:l,children:[(0,t.jsx)(o.N,{}),"Save"]})]})]})})})]})},w=e=>{let{searchParams:n}=e,[a,r]=(0,s.useState)(""),[c,d]=(0,s.useState)([]),u=null==n?void 0:n.addInstance,m=null==n?void 0:n.instance;(0,s.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/instance");if(!e.ok)throw e;let n=await e.json();d(n.data)}catch(n){let e=await n.json();p.toast.error(e.message)}};return(0,t.jsxs)("main",{className:"w-[95%] mx-auto",children:[(0,t.jsx)("h1",{className:" p-4 font-bold text-slate-700 text-xl",children:"Instance List"}),(0,t.jsxs)("section",{className:"grid grid-cols-2 gap-2  min-h-[70vh]",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsxs)(i(),{href:"/admin/instance?addInstance=true",className:"navLink bg-indigo-100 w-44 text-center text-indigo-900",children:[(0,t.jsx)(o.dt,{}),"Add Instance"]}),(0,t.jsx)("div",{className:"my-2 bg-slate-200 h-1 rounded-full"}),(0,t.jsx)("div",{className:"group",children:(0,t.jsxs)("div",{className:"searchBar",children:[(0,t.jsx)(o.W1,{}),(0,t.jsx)("input",{type:"text",placeholder:"Search Instance...",onChange:e=>r(e.target.value)})]})}),(0,t.jsx)("ul",{className:"flex flex-col gap-2 mt-4 overflow-y-auto h-[55vh]",children:(0,t.jsx)(j,{instanceList:c,search:a})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 ",children:[m&&(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(l.Z,{}),children:(0,t.jsx)(y,{})}),u&&(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(l.Z,{}),children:(0,t.jsx)(f,{})})]})]})]})}},6019:function(e,n,a){"use strict";var t=a(7437);n.Z=()=>(0,t.jsx)("h1",{children:"Loading..."})},841:function(e,n,a){"use strict";var t=a(7437),s=a(2005),r=a(6230);n.Z=e=>{let{...n}=e;return(0,t.jsx)(r.Bc,{...n,render:e=>(0,t.jsx)("div",{className:n.className,children:(0,t.jsxs)("div",{className:"flex gap-2 text-red-700",children:[(0,t.jsx)(s.Pz,{className:"w-6 h-6"}),(0,t.jsx)("div",{children:e})]})})})}},7263:function(e,n,a){"use strict";function t(e){let n=new FormData;for(let[a,t]of Object.entries(e))n.append(a,t);return n}a.d(n,{Z:function(){return t}})},6454:function(e,n,a){"use strict";a.d(n,{Gw:function(){return o},Jv:function(){return u},U0:function(){return i},Us:function(){return h},Wj:function(){return s},Yi:function(){return d},bi:function(){return t},dr:function(){return l},mI:function(){return r},uv:function(){return m},w4:function(){return c}});let t={username:"",fullname:"",email:"",role:"USER"},s={username:"",fullname:"",email:"",role:"",signature:""},r={sign:"",dso:"",split:"",i20File:""},i={i20Type:"initI20",dsoName:"",i20File:"",issmFile:"",slateFile:"",toSlate:"n",prog:"ug"},l={x:80,y:180,length:160,width:60,signFile:"",action:""},o={username:"",password:""},c={username:""},d={cPwd:"",nPwd:"",cNPwd:""},u={username:"",fullname:"",email:""},m={type:"",username:"",password:"",endpoint:""},h={vpnUsername:"",vpnPassword:"",issmUsername:"",issmPassword:"",excelFile:"",instance:""}},7308:function(e,n,a){"use strict";a.d(n,{IA:function(){return o},PI:function(){return l},S2:function(){return d},ZD:function(){return u},vN:function(){return c},xM:function(){return m}});var t=a(7437),s=a(4263),r=a(2265),i=a(2838);let l=e=>{let{...n}=e,a=(0,s.useContextDispatch)();return(0,t.jsx)("select",{...n,onChange:e=>{n.form.setFieldValue(n.field.name,e.target.value),a({type:"slateInput",data:e.target.value})}})},o=e=>{let{...n}=e;return(0,t.jsx)("input",{type:"checkbox",onChange:e=>{n.form.setFieldValue(n.field.name,e.target.value)},...n})},c=e=>{let{...n}=e,a=(0,s.useContextDispatch)();return(0,t.jsx)("input",{type:"checkbox",onChange:e=>{n.form.setFieldValue(n.field.name,e.target.value),a({type:"dsoSign",data:e.target.checked})},...n})},d=e=>{let{...n}=e;return(0,t.jsx)("input",{type:"file",...n,onChange:e=>{n.form.setFieldValue(n.field.name,e.currentTarget.files[0])}})},u=e=>{let{...n}=e,[a,s]=(0,r.useState)(n.active),l=()=>{s(!a),n.form.setFieldValue(n.field.name,!a)};return(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)("label",{children:a?"Active":"Inactive"}),(0,t.jsx)("div",{className:"group ".concat(n.disabled?"opacity-70 group-hover:transition-none":""),children:(0,t.jsxs)(i.r,{checked:a,onChange:()=>l(),className:"".concat(a?"bg-green-600 group-hover:bg-green-700":"bg-red-600 group-hover:bg-red-700"," relative inline-flex h-6 w-12 items-center rounded-full transition duration-150"),disabled:n.disabled,children:[(0,t.jsx)("span",{className:"sr-only",children:n.name}),(0,t.jsx)("span",{className:"".concat(a?"translate-x-3":"-translate-x-3"," inline-block h-4 w-4 transform rounded-full bg-white transition group-hover:scale-125 duration-150")})]})})]})},m=e=>{let{...n}=e;return!n.hidden&&(0,t.jsxs)("button",{type:"submit",disabled:n.loading,children:[(0,t.jsx)("span",{className:"animate-ping w-2 h-2 bg-indigo-700 rounded-full absolute",hidden:!n.loading}),(0,t.jsx)("span",{className:"w-2 h-2 bg-indigo-900 rounded-full",hidden:!n.loading}),!n.loading&&n.children,n.loading?"".concat(n.loadingMsg):"".concat(n.action)]})}},6762:function(e,n,a){"use strict";a.d(n,{IK:function(){return s},JI:function(){return r},Ju:function(){return c},OC:function(){return u},Qh:function(){return d},dm:function(){return o},eF:function(){return i},nf:function(){return l},uz:function(){return m}});var t=a(5691);let s=t.Ry({username:t.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a username"),fullname:t.Z_().max(50,"You may only enter upto 50 characters").required("Please enter fullname"),email:t.Z_().email().max(50,"You may only enter upto 50 characters").required("Please enter a valid email address")}),r=t.Ry({dsoName:t.nK().required("Please select a DSO"),i20File:t.nK().required("Please select a I20 file"),issmFile:t.nK().required("Please select a issm file"),slateFile:t.nK().required("Please select a slate file")}),i=t.Ry({username:t.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),fullname:t.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Full name"),email:t.Z_().email().required("Please enter a email address").max(50,"You may only enter upto 50 characters")}),l=t.Ry({x:t.Rx().required("Please enter x-coordinates"),y:t.Rx().required("Please enter y-coordinates"),length:t.Rx().required("Please enter length"),width:t.Rx().required("Please enter width"),signFile:t.nK().required("Please attach a signature"),action:t.Z_().required("Please select an action")}),o=t.Ry({username:t.Z_().required("Please provide the username"),password:t.Z_().required("Please provide the password")}),c=t.Ry({username:t.Z_().required("Please provide username")}),d=t.Ry({cPwd:t.Z_().max(50,"You may only enter upto 50 characters").required("Please provide current password"),nPwd:t.Z_().max(50,"You may only enter upto 50 characters").required("Please provide new password"),cNPwd:t.Z_().label("nPwd").oneOf([t.iH("nPwd"),""],"Passwords must match").max(50,"You may only enter upto 50 characters").required("Please provide confirm new password")}),u=t.Ry({type:t.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Instance name"),username:t.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),password:t.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Password"),endpoint:t.Z_().required("Please enter a endpoint address")}),m=t.Ry({vpnUsername:t.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a VPN username"),vpnPassword:t.Z_().max(50,"You may only enter upto 50 characters").required("Please enter VPN Password"),issmUsername:t.Z_().max(20,"You may only enter upto 20 characters").required("Please enter ISSM Username"),issmPassword:t.Z_().max(50,"You may only enter upto 50 characters").required("Please enter ISSM Password"),excelFile:t.nK().required("Please attach the Excel file"),instance:t.Z_().required("Please select an Instance")})},1396:function(e,n,a){e.exports=a(6685)},4033:function(e,n,a){e.exports=a(8165)}},function(e){e.O(0,[685,910,146,971,596,744],function(){return e(e.s=2368)}),_N_E=e.O()}]);