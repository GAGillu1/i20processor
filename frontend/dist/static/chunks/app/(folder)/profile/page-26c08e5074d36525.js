(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{5311:function(e,a,n){Promise.resolve().then(n.bind(n,3560))},3560:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return f}});var r=n(7437),t=n(6375),s=n(9850),l=n(7263),i=n(6454),u=n(6762),o=n(6230),d=n(2265),c=n(5925),m=n(7308),h=()=>{let[e,a]=(0,d.useState)(!1),n=(0,s.useMyContext)(),h=n.username;async function x(e){try{a(!0);let n=await fetch("/api/changePwd/"+h,{method:"PUT",body:(0,l.Z)(e)});if(!n.ok)throw n;let r=await n.json();c.default.success(r.message)}catch(a){let e=await a.json();c.default.error(e.message)}finally{a(!1)}}return(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,r.jsx)("h3",{children:"Change Password"}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"Update your account password"}),(0,r.jsx)(o.J9,{initialValues:i.Yi,validationSchema:u.Qh,onSubmit:e=>x(e),children:(0,r.jsx)("section",{className:"p-12 max-h-[60%] my-auto rounded-lg w-[90%] font-semibold text-gray-700",children:(0,r.jsxs)(o.l0,{className:"flex flex-col gap-1",children:[(0,r.jsx)("label",{htmlFor:"cPwd",children:"Current Password"}),(0,r.jsx)(o.gN,{name:"cPwd",type:"password"}),(0,r.jsx)(t.Z,{name:"cPwd"}),(0,r.jsx)("label",{htmlFor:"nPwd",children:"New Password"}),(0,r.jsx)(o.gN,{name:"nPwd",type:"password"}),(0,r.jsx)(t.Z,{name:"nPwd"}),(0,r.jsx)("label",{htmlFor:"cNPwd",children:"Confirm New Password"}),(0,r.jsx)(o.gN,{name:"cNPwd",type:"password"}),(0,r.jsx)(t.Z,{name:"cNPwd"}),(0,r.jsx)("div",{className:"flex justify-end items-center mt-4",children:(0,r.jsx)(m.xM,{loading:e,loadingMsg:"Updating",action:"Update Password"})})]})})})]})},x=e=>{let{...a}=e,[n,h]=(0,d.useState)(!1),[x,f]=(0,d.useState)(!1),[p,y]=(0,d.useState)(i.Jv),g=a.username,P=(0,s.useContextDispatch)();(0,d.useEffect)(()=>{console.log(g),h(!0),w(g)},[g]);let w=async e=>{await fetch("/api/users/"+e).then(e=>e.json()).then(e=>{y(e.data),h(!1)})};async function j(e){try{f(!0);let a=await fetch("/api/users/"+g,{method:"PUT",body:(0,l.Z)(e)});if(!a.ok)throw a;let n=await a.json();console.log(n),P({type:"userUpdate",action:n.data}),c.default.success(n.message)}catch(a){let e=await a.json();c.default.error(e.message)}finally{f(!1)}}return(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,r.jsx)("h3",{children:"Personal Information"}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"Access and edit your personal information"}),!n&&(0,r.jsx)(o.J9,{initialValues:p,validationSchema:u.Ju,onSubmit:e=>j(e),children:(0,r.jsx)("section",{className:"p-12 max-h-[60%] my-auto rounded-lg w-[90%] font-semibold text-gray-700",children:(0,r.jsxs)(o.l0,{className:"flex flex-col gap-1",children:[(0,r.jsx)("label",{htmlFor:"username",children:"Username"}),(0,r.jsx)(o.gN,{name:"username"}),(0,r.jsx)(t.Z,{name:"username"}),(0,r.jsx)("label",{htmlFor:"fullname",children:"Full Name"}),(0,r.jsx)(o.gN,{name:"fullname"}),(0,r.jsx)(t.Z,{name:"fullname"}),(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)(o.gN,{name:"email",type:"email"}),(0,r.jsx)(t.Z,{name:"email"}),(0,r.jsx)("div",{className:"flex justify-end items-center mt-4",children:(0,r.jsx)(m.xM,{loading:x,loadingMsg:"Updating",action:"Update Profile"})})]})})})]})},f=()=>{let e=(0,s.useMyContext)(),a=e.username;return(0,r.jsxs)("main",{className:"w-[95%] mx-auto",children:[(0,r.jsx)("h2",{children:"Account Settings"}),(0,r.jsxs)("section",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)(x,{username:a}),(0,r.jsx)(h,{})]})]})}},6375:function(e,a,n){"use strict";var r=n(7437),t=n(2005),s=n(6230);a.Z=e=>{let{...a}=e;return(0,r.jsx)(s.Bc,{...a,render:e=>(0,r.jsx)("div",{className:a.className,children:(0,r.jsxs)("div",{className:"flex gap-2 text-red-700",children:[(0,r.jsx)(t.Pz,{className:"w-6 h-6"}),(0,r.jsx)("div",{children:e})]})})})}},7263:function(e,a,n){"use strict";function r(e){let a=new FormData;for(let[n,r]of Object.entries(e))a.append(n,r);return a}n.d(a,{Z:function(){return r}})},6454:function(e,a,n){"use strict";n.d(a,{Gw:function(){return u},Jv:function(){return c},U0:function(){return l},Us:function(){return h},Wj:function(){return t},Yi:function(){return d},bi:function(){return r},dr:function(){return i},jd:function(){return x},mI:function(){return s},uv:function(){return m},w4:function(){return o}});let r={username:"",fullname:"",email:"",role:"USER"},t={username:"",fullname:"",email:"",role:"",signature:""},s={sign:"",dso:"",split:"",i20File:""},l={i20Type:"initI20",dsoName:"",i20File:"",issmFile:"",slateFile:"",toSlate:"n",prog:"ug"},i={x:80,y:180,length:160,width:60,signFile:"",action:""},u={username:"",password:""},o={username:""},d={cPwd:"",nPwd:"",cNPwd:""},c={username:"",fullname:"",email:""},m={type:"",username:"",password:"",endpoint:""},h={vpnUsername:"",vpnPassword:"",issmUsername:"",issmPassword:"",excelFile:"",instance:""},x={institutionName:"",adminFullName:"",email:"",crm:"",adminDisplayName:"",adminContact:""}},7308:function(e,a,n){"use strict";n.d(a,{IA:function(){return d},P0:function(){return f},PI:function(){return o},S2:function(){return m},ZD:function(){return h},vN:function(){return c},xM:function(){return x}});var r=n(7437),t=n(9850),s=n(2265),l=n(2838),i=n(5794),u=n.n(i);let o=e=>{let{...a}=e,n=(0,t.useContextDispatch)();return(0,r.jsx)("select",{...a,onChange:e=>{a.form.setFieldValue(a.field.name,e.target.value),n({type:"slateInput",data:e.target.value})}})},d=e=>{let{...a}=e;return(0,r.jsx)("input",{type:"checkbox",onChange:e=>{a.form.setFieldValue(a.field.name,e.target.value)},...a})},c=e=>{let{...a}=e,n=(0,t.useContextDispatch)();return(0,r.jsx)("input",{type:"checkbox",onChange:e=>{a.form.setFieldValue(a.field.name,e.target.value),n({type:"dsoSign",data:e.target.checked})},...a})},m=e=>{let{...a}=e;return(0,r.jsx)("input",{type:"file",...a,onChange:e=>{a.form.setFieldValue(a.field.name,e.currentTarget.files[0])}})},h=e=>{let{...a}=e,[n,t]=(0,s.useState)(a.active),i=()=>{t(!n),a.form.setFieldValue(a.field.name,!n)};return(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)("label",{children:n?"Active":"Inactive"}),(0,r.jsx)("div",{className:"group ".concat(a.disabled?"opacity-70 group-hover:transition-none":""),children:(0,r.jsxs)(l.r,{checked:n,onChange:()=>i(),className:"".concat(n?"bg-green-600 group-hover:bg-green-700":"bg-red-600 group-hover:bg-red-700"," relative inline-flex h-6 w-12 items-center rounded-full transition duration-150"),disabled:a.disabled,children:[(0,r.jsx)("span",{className:"sr-only",children:a.name}),(0,r.jsx)("span",{className:"".concat(n?"translate-x-3":"-translate-x-3"," inline-block h-4 w-4 transform rounded-full bg-white transition group-hover:scale-125 duration-150")})]})})]})},x=e=>{let{...a}=e;return!a.hidden&&(0,r.jsxs)("button",{type:"submit",disabled:a.loading,children:[(0,r.jsx)("span",{className:"animate-ping w-2 h-2 bg-indigo-700 rounded-full absolute",hidden:!a.loading}),(0,r.jsx)("span",{className:"w-2 h-2 bg-indigo-900 rounded-full",hidden:!a.loading}),!a.loading&&a.children,a.loading?"".concat(a.loadingMsg):"".concat(a.action)]})},f=e=>{let{...a}=e;return(0,r.jsx)(u(),{country:"us",specialLabel:"",isValid:!0,defaultErrorMessage:"Please enter a valid phone number",onChange:e=>{a.form.setFieldValue(a.field.name,e)},...a})}},6762:function(e,a,n){"use strict";n.d(a,{IK:function(){return t},JI:function(){return s},Ju:function(){return o},OC:function(){return c},Qh:function(){return d},dm:function(){return u},eF:function(){return l},nf:function(){return i},uM:function(){return h},uz:function(){return m}});var r=n(5691);let t=r.Ry({username:r.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a username"),fullname:r.Z_().max(50,"You may only enter upto 50 characters").required("Please enter fullname"),email:r.Z_().email().max(50,"You may only enter upto 50 characters").required("Please enter a valid email address")}),s=r.Ry({dsoName:r.nK().required("Please select a DSO"),i20File:r.nK().required("Please select a I20 file"),issmFile:r.nK().required("Please select a issm file"),slateFile:r.nK().required("Please select a slate file")}),l=r.Ry({username:r.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),fullname:r.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Full name"),email:r.Z_().email().required("Please enter a email address").max(50,"You may only enter upto 50 characters")}),i=r.Ry({x:r.Rx().required("Please enter x-coordinates"),y:r.Rx().required("Please enter y-coordinates"),length:r.Rx().required("Please enter length"),width:r.Rx().required("Please enter width"),signFile:r.nK().required("Please attach a signature"),action:r.Z_().required("Please select an action")}),u=r.Ry({username:r.Z_().email("Please enter a valid email address").required("Please provide the email"),password:r.Z_().required("Please provide the password")}),o=r.Ry({username:r.Z_().email("Please enter a valid email address").required("Please provide email address")}),d=r.Ry({cPwd:r.Z_().max(50,"You may only enter upto 50 characters").required("Please provide current password"),nPwd:r.Z_().max(50,"You may only enter upto 50 characters").required("Please provide new password"),cNPwd:r.Z_().label("nPwd").oneOf([r.iH("nPwd"),""],"Passwords must match").max(50,"You may only enter upto 50 characters").required("Please provide confirm new password")}),c=r.Ry({type:r.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Instance name"),username:r.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),password:r.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Password"),endpoint:r.Z_().required("Please enter a endpoint address")}),m=r.Ry({vpnUsername:r.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a VPN username"),vpnPassword:r.Z_().max(50,"You may only enter upto 50 characters").required("Please enter VPN Password"),issmUsername:r.Z_().max(20,"You may only enter upto 20 characters").required("Please enter ISSM Username"),issmPassword:r.Z_().max(50,"You may only enter upto 50 characters").required("Please enter ISSM Password"),excelFile:r.nK().required("Please attach the Excel file"),instance:r.Z_().required("Please select an Instance")}),h=r.Ry({institutionName:r.Z_().max(30,"You may only enter upto 30 characters").required("Please enter a University name"),adminFullName:r.Z_().max(30,"You may only enter upto 30 characters").required("Please enter admin full name"),adminDisplayName:r.Z_().max(30,"You may only enter upto 30 characters").required("Please enter a Password"),email:r.Z_().email().required("Please enter a email address").max(50,"You may only enter upto 50 characters"),crm:r.Z_().max(30,"You may only enter upto 30 characters").required("Please enter a Password"),adminContact:r.nK().required("Please enter a Phone number")})}},function(e){e.O(0,[510,194,971,596,744],function(){return e(e.s=5311)}),_N_E=e.O()}]);