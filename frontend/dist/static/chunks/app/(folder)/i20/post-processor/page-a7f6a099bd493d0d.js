(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{1861:function(e,a,n){Promise.resolve().then(n.bind(n,768))},6509:function(e,a,n){"use strict";var s=n(7437),t=n(2265),r=n(5925);a.Z=()=>{let[e,a]=(0,t.useState)(["Select DSO"]);(0,t.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=await fetch("/api/dso");if(!e.ok)throw e;let{data:n}=await e.json();a(n)}catch(a){let e=await a.json();r.toast.error(e.message)}};return(0,s.jsx)(t.Fragment,{children:e.length>0?e.map(e=>(0,s.jsx)("option",{value:e,children:e},e)):""})}},768:function(e,a,n){"use strict";n.r(a);var s=n(7437),t=n(2265),r=n(6230),l=n(9850),i=n(6762),o=n(6454),c=n(7308),u=n(6509),d=n(6375),m=n(5925),h=n(7263),p=n(8545),x=n(4033);a.default=e=>{let{searchParams:a}=e,n=(0,x.useRouter)(),[f,g]=(0,t.useState)(!1),[j,y]=(0,t.useState)(!1),P=null==a?void 0:a.result,w=(0,l.useMyContext)(),N=(0,l.useContextDispatch)();async function v(e){try{y(!0);let a=await fetch("/api/i20/post-processor",{method:"POST",body:(0,h.Z)(e)});if(!a.ok)throw a;let s=await a.blob(),t=window.URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.setAttribute("download","i20.zip"),r.click(),window.URL.revokeObjectURL(t),m.toast.success("Download Successful!"),n.push("/i20/post-processor?result=true")}catch(a){let e=await a.json();m.toast.error(e.message)}finally{y(!1),N({type:"postProcessUpdate",action:0})}}return(0,t.useEffect)(()=>{g("y"===w.toSlate)},[w.toSlate,w]),(0,s.jsxs)("main",{className:"main",children:[(0,s.jsx)("h2",{children:"I20 Post-processor"}),(0,s.jsx)("section",{className:"section",children:P?(0,s.jsx)(p.H,{}):(0,s.jsx)(r.J9,{initialValues:o.U0,validationSchema:i.JI,onSubmit:e=>v(e),children:(0,s.jsxs)("section",{className:"w-[90%] mx-auto",children:[(0,s.jsx)("h2",{className:"formHeader",children:"Import I20"}),(0,s.jsxs)(r.l0,{className:"grid grid-cols-3 gap-y-2 items-center",children:[(0,s.jsx)("label",{htmlFor:"i20Type",children:"I20 Type:"}),(0,s.jsxs)(r.gN,{component:"select",name:"i20Type",className:"col-span-2",children:[(0,s.jsx)("option",{value:"initI20",children:"Initial I20"}),(0,s.jsx)("option",{value:"contdI20",children:"Continued I20"})]}),(0,s.jsx)("label",{htmlFor:"dsoName",children:"DSO:"}),(0,s.jsxs)(r.gN,{as:"select",name:"dsoName",className:"col-span-2",children:[(0,s.jsx)("option",{value:"",children:"Select DSO"}),(0,s.jsx)(u.Z,{})]}),(0,s.jsx)(d.Z,{name:"dsoName",className:"col-span-2 col-start-2"}),(0,s.jsx)("label",{htmlFor:"i20File",children:"I20 File:"}),(0,s.jsx)(r.gN,{component:c.S2,name:"i20File",accept:".pdf",className:"col-span-2"}),(0,s.jsx)(d.Z,{name:"i20File",className:"col-span-2 col-start-2"}),(0,s.jsx)("label",{htmlFor:"issmFile",children:"ISSM File:"}),(0,s.jsx)(r.gN,{component:c.S2,name:"issmFile",accept:".xlsx",className:"col-span-2"}),(0,s.jsx)(d.Z,{name:"issmFile",className:"col-span-2 col-start-2"}),(0,s.jsx)("label",{htmlFor:"slateFile",children:"Slate File:"}),(0,s.jsx)(r.gN,{component:c.S2,name:"slateFile",accept:".xlsx",className:"col-span-2"}),(0,s.jsx)(d.Z,{name:"slateFile",className:"col-span-2 col-start-2"}),(0,s.jsx)("label",{htmlFor:"toSlate",children:" Transfer File to Slate:"}),(0,s.jsxs)(r.gN,{component:c.PI,name:"toSlate",className:"col-span-2",children:[(0,s.jsx)("option",{value:"n",children:"No"}),(0,s.jsx)("option",{value:"y",children:"Yes"})]}),(0,s.jsx)(d.Z,{name:"toSlate"}),f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{htmlFor:"prog",children:" Program:"}),(0,s.jsxs)(r.gN,{component:"select",name:"prog",className:"col-span-2",children:[(0,s.jsx)("option",{value:"ug",children:"Under Graduate"}),(0,s.jsx)("option",{value:"g",children:"Graduate"})]}),(0,s.jsx)(d.Z,{name:"prog",className:"col-span-2 col-start-2"})]}),(0,s.jsx)("div",{className:"mx-auto col-span-3 mt-8",children:(0,s.jsx)(c.xM,{loading:j,loadingMsg:"Processing",action:"Process"})})]})]})})}),j&&(0,s.jsx)(p.k,{})]})}},6375:function(e,a,n){"use strict";var s=n(7437),t=n(2005),r=n(6230);a.Z=e=>{let{...a}=e;return(0,s.jsx)(r.Bc,{...a,render:e=>(0,s.jsx)("div",{className:a.className,children:(0,s.jsxs)("div",{className:"flex gap-2 text-red-700",children:[(0,s.jsx)(t.Pz,{className:"w-6 h-6"}),(0,s.jsx)("div",{children:e})]})})})}},7263:function(e,a,n){"use strict";function s(e){let a=new FormData;for(let[n,s]of Object.entries(e))a.append(n,s);return a}n.d(a,{Z:function(){return s}})},6454:function(e,a,n){"use strict";n.d(a,{Gw:function(){return o},Jv:function(){return d},U0:function(){return l},Us:function(){return h},Wj:function(){return t},Yi:function(){return u},bi:function(){return s},dr:function(){return i},jd:function(){return p},mI:function(){return r},uv:function(){return m},w4:function(){return c}});let s={username:"",fullname:"",email:"",role:"USER"},t={username:"",fullname:"",email:"",role:"",signature:""},r={sign:"",dso:"",split:"",i20File:""},l={i20Type:"initI20",dsoName:"",i20File:"",issmFile:"",slateFile:"",toSlate:"n",prog:"ug"},i={x:80,y:180,length:160,width:60,signFile:"",action:""},o={username:"",password:""},c={username:""},u={cPwd:"",nPwd:"",cNPwd:""},d={username:"",fullname:"",email:""},m={type:"",username:"",password:"",endpoint:""},h={vpnUsername:"",vpnPassword:"",issmUsername:"",issmPassword:"",excelFile:"",instance:""},p={institutionName:"",adminFullName:"",email:"",crm:"",adminDisplayName:"",adminContact:""}},7308:function(e,a,n){"use strict";n.d(a,{IA:function(){return u},P0:function(){return x},PI:function(){return c},S2:function(){return m},ZD:function(){return h},vN:function(){return d},xM:function(){return p}});var s=n(7437),t=n(9850),r=n(2265),l=n(2838),i=n(5794),o=n.n(i);let c=e=>{let{...a}=e,n=(0,t.useContextDispatch)();return(0,s.jsx)("select",{...a,onChange:e=>{a.form.setFieldValue(a.field.name,e.target.value),n({type:"slateInput",data:e.target.value})}})},u=e=>{let{...a}=e;return(0,s.jsx)("input",{type:"checkbox",onChange:e=>{a.form.setFieldValue(a.field.name,e.target.value)},...a})},d=e=>{let{...a}=e,n=(0,t.useContextDispatch)();return(0,s.jsx)("input",{type:"checkbox",onChange:e=>{a.form.setFieldValue(a.field.name,e.target.value),n({type:"dsoSign",data:e.target.checked})},...a})},m=e=>{let{...a}=e;return(0,s.jsx)("input",{type:"file",...a,onChange:e=>{a.form.setFieldValue(a.field.name,e.currentTarget.files[0])}})},h=e=>{let{...a}=e,[n,t]=(0,r.useState)(a.active),i=()=>{t(!n),a.form.setFieldValue(a.field.name,!n)};return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("label",{children:n?"Active":"Inactive"}),(0,s.jsx)("div",{className:"group ".concat(a.disabled?"opacity-70 group-hover:transition-none":""),children:(0,s.jsxs)(l.r,{checked:n,onChange:()=>i(),className:"".concat(n?"bg-green-600 group-hover:bg-green-700":"bg-red-600 group-hover:bg-red-700"," relative inline-flex h-6 w-12 items-center rounded-full transition duration-150"),disabled:a.disabled,children:[(0,s.jsx)("span",{className:"sr-only",children:a.name}),(0,s.jsx)("span",{className:"".concat(n?"translate-x-3":"-translate-x-3"," inline-block h-4 w-4 transform rounded-full bg-white transition group-hover:scale-125 duration-150")})]})})]})},p=e=>{let{...a}=e;return!a.hidden&&(0,s.jsxs)("button",{type:"submit",disabled:a.loading,children:[(0,s.jsx)("span",{className:"animate-ping w-2 h-2 bg-indigo-700 rounded-full absolute",hidden:!a.loading}),(0,s.jsx)("span",{className:"w-2 h-2 bg-indigo-900 rounded-full",hidden:!a.loading}),!a.loading&&a.children,a.loading?"".concat(a.loadingMsg):"".concat(a.action)]})},x=e=>{let{...a}=e;return(0,s.jsx)(o(),{country:"us",specialLabel:"",isValid:!0,defaultErrorMessage:"Please enter a valid phone number",onChange:e=>{a.form.setFieldValue(a.field.name,e)},...a})}},8545:function(e,a,n){"use strict";n.d(a,{H:function(){return j},k:function(){return x}});var s=n(7437),t=n(2265),r=n(9850),l=n(5925),i=n(4033),o=n(1396),c=n.n(o);let u=["w-1/6","w-2/6","w-3/6","w-4/6","w-full","w-full"],d=["Add Sign:","Split Failure:","Total Files:","Total Pages:","Total Signatures:","Index Error:","Index Size:","Index Msg:","Missing Records:","Sign Message:","Split Message","Zip Message:"],m=["Uploading","Splitting & Signing","Creating Index File","Zipping","Downloading","Downloading & Posting"],h=["Loading","Uploading","Validating VPN Credentials","VPN login Success","ISSM login Validation","ISSM Login Success"],p=()=>{let[e,a]=(0,t.useState)([]),n=(0,i.usePathname)(),r="/api"+n,o=async()=>{try{let e=await fetch(r);if(console.log("res status",e.status),!e.ok)throw e;let n=await e.json();console.log(n),console.log(Object.values(n.data)),a(Object.values(n.data))}catch(a){let e=await a.json();l.default.error(e.message)}};return(0,t.useEffect)(()=>{o()},[]),e.length>0?d.map((a,n)=>e[n]?(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)("p",{className:"font-semibold",children:a}),(0,s.jsx)("p",{className:"col-span-2",children:e[n]})]},n):""):""},x=()=>{let e=(0,i.usePathname)();return"/i20/pre-processor"===e?(0,s.jsx)(f,{}):(0,s.jsx)(g,{})},f=()=>{let e=(0,r.useMyContext)(),a=e.preProcessStatus,n=e.preProcessMaxCount+5;return(0,s.jsx)("section",{className:"section",children:(0,s.jsxs)("div",{className:"w-[90%] mx-auto",children:[(0,s.jsx)("h3",{className:"animate-pulse text-center",children:"".concat(a<6?h[a]:"Processed "+(a-5)+"/"+(n-5))}),(0,s.jsx)("div",{className:"mt-4 h-2 w-full rounded-full bg-slate-200",children:(0,s.jsx)("div",{className:"h-2 animate-pulse bg-indigo-400 rounded-full ",style:{width:"".concat(Math.floor(a/n*100),"%")}})})]})})},g=()=>{let e=(0,r.useMyContext)(),a=Math.abs(e.postProcessStatus);return(0,s.jsx)("section",{className:"section",children:(0,s.jsxs)("div",{className:"w-[90%] mx-auto",children:[(0,s.jsx)("h3",{className:"animate-pulse text-center",children:"".concat(m[a])}),(0,s.jsx)("div",{className:"mt-4 h-2 w-full rounded-full bg-slate-200",children:(0,s.jsx)("div",{className:"h-2 animate-pulse bg-indigo-400 rounded-full "+"".concat(u[a])})})]})})},j=()=>{let e=(0,i.usePathname)();return(0,s.jsxs)("section",{className:"w-[90%] mx-auto",children:[(0,s.jsx)("h2",{className:"formHeader",children:"Results"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-y-2",children:(0,s.jsx)(p,{})}),(0,s.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,s.jsx)(c(),{href:e,children:(0,s.jsx)("button",{children:"Got it!"})})})]})}},6762:function(e,a,n){"use strict";n.d(a,{IK:function(){return t},JI:function(){return r},Ju:function(){return c},OC:function(){return d},Qh:function(){return u},dm:function(){return o},eF:function(){return l},nf:function(){return i},uM:function(){return h},uz:function(){return m}});var s=n(5691);let t=s.Ry({username:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a username"),fullname:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter fullname"),email:s.Z_().email().max(50,"You may only enter upto 50 characters").required("Please enter a valid email address")}),r=s.Ry({dsoName:s.nK().required("Please select a DSO"),i20File:s.nK().required("Please select a I20 file"),issmFile:s.nK().required("Please select a issm file"),slateFile:s.nK().required("Please select a slate file")}),l=s.Ry({username:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),fullname:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Full name"),email:s.Z_().email().required("Please enter a email address").max(50,"You may only enter upto 50 characters")}),i=s.Ry({x:s.Rx().required("Please enter x-coordinates"),y:s.Rx().required("Please enter y-coordinates"),length:s.Rx().required("Please enter length"),width:s.Rx().required("Please enter width"),signFile:s.nK().required("Please attach a signature"),action:s.Z_().required("Please select an action")}),o=s.Ry({username:s.Z_().email("Please enter a valid email address").required("Please provide the email"),password:s.Z_().required("Please provide the password")}),c=s.Ry({username:s.Z_().email("Please enter a valid email address").required("Please provide email address")}),u=s.Ry({cPwd:s.Z_().max(50,"You may only enter upto 50 characters").required("Please provide current password"),nPwd:s.Z_().max(50,"You may only enter upto 50 characters").required("Please provide new password"),cNPwd:s.Z_().label("nPwd").oneOf([s.iH("nPwd"),""],"Passwords must match").max(50,"You may only enter upto 50 characters").required("Please provide confirm new password")}),d=s.Ry({type:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Instance name"),username:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a Username"),password:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter a Password"),endpoint:s.Z_().required("Please enter a endpoint address")}),m=s.Ry({vpnUsername:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter a VPN username"),vpnPassword:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter VPN Password"),issmUsername:s.Z_().max(20,"You may only enter upto 20 characters").required("Please enter ISSM Username"),issmPassword:s.Z_().max(50,"You may only enter upto 50 characters").required("Please enter ISSM Password"),excelFile:s.nK().required("Please attach the Excel file"),instance:s.Z_().required("Please select an Instance")}),h=s.Ry({institutionName:s.Z_().max(30,"You may only enter upto 30 characters").required("Please enter a University name"),adminFullName:s.Z_().max(30,"You may only enter upto 30 characters").required("Please enter admin full name"),adminDisplayName:s.Z_().max(30,"You may only enter upto 30 characters").required("Please enter a Password"),email:s.Z_().email().required("Please enter a email address").max(50,"You may only enter upto 50 characters"),crm:s.Z_().max(30,"You may only enter upto 30 characters").required("Please enter a Password"),adminContact:s.nK().required("Please enter a Phone number")})},1396:function(e,a,n){e.exports=n(6685)},4033:function(e,a,n){e.exports=n(8165)}},function(e){e.O(0,[685,510,194,971,596,744],function(){return e(e.s=1861)}),_N_E=e.O()}]);