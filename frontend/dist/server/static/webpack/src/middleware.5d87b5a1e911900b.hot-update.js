"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n\nfunction middleware(request) {\n    const path = request.nextUrl.pathname;\n    const token = request.cookies.get(\"authorization\")?.value;\n    const role = request.cookies.get(\"role\")?.value;\n    const isAdmin = role === \"ADMIN\";\n    const isUser = role === \"USER\";\n    const isPublicPath = path === \"/login\" || path === \"/support\";\n    const isAdminPath = path.includes(\"admin\");\n    const isStaffPath = path === \"/dso\";\n    const isUserPath = !(isAdminPath || isStaffPath);\n    const isAtHome = path === \"/\";\n    // update the below\n    const isSuperAdmin = role === \"ADMIN\";\n    const isSuperAdminPath = path === \"/admin/university\";\n    if (token) {\n        if (isPublicPath) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/\", request.url));\n        }\n        if (!isAdmin && isAdminPath || isUser && !isUserPath || !isSuperAdmin && isSuperAdminPath) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/not-Authorized\", request.url));\n        }\n    } else {\n        if (!isPublicPath) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].redirect(new URL(\"/login\", request.url));\n        }\n    }\n}\nconst config = {\n    matcher: [\n        \"/\",\n        \"/notFound\",\n        \"/not-authorized\",\n        \"/i20\",\n        \"/i20/pre-processor\",\n        \"/i20/post-processor\",\n        \"/admin\",\n        \"/admin/users\",\n        \"/admin/instance\",\n        \"/admin/institution\",\n        \"/dso\",\n        \"/login\",\n        \"/profile\",\n        \"/logs\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBR3BDLFNBQVNDLFdBQVdDLE9BQW9CO0lBQzdDLE1BQU1DLE9BQU9ELFFBQVFFLE9BQU8sQ0FBQ0MsUUFBUTtJQUNyQyxNQUFNQyxRQUFRSixRQUFRSyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQkFBa0JDO0lBQ3BELE1BQU1DLE9BQU9SLFFBQVFLLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFNBQVNDO0lBRTFDLE1BQU1FLFVBQVVELFNBQVM7SUFDekIsTUFBTUUsU0FBU0YsU0FBUztJQUN4QixNQUFNRyxlQUFlVixTQUFTLFlBQVlBLFNBQVM7SUFDbkQsTUFBTVcsY0FBY1gsS0FBS1ksUUFBUSxDQUFDO0lBQ2xDLE1BQU1DLGNBQWNiLFNBQVM7SUFDN0IsTUFBTWMsYUFBYSxDQUFFSCxDQUFBQSxlQUFlRSxXQUFVO0lBQzlDLE1BQU1FLFdBQVdmLFNBQVM7SUFDMUIsbUJBQW1CO0lBQ25CLE1BQU1nQixlQUFlVCxTQUFTO0lBQzlCLE1BQU1VLG1CQUFtQmpCLFNBQVM7SUFFbEMsSUFBSUcsT0FBTztRQUNULElBQUlPLGNBQWM7WUFDaEIsT0FBT2Isa0ZBQVlBLENBQUNxQixRQUFRLENBQUMsSUFBSUMsSUFBSSxLQUFLcEIsUUFBUXFCLEdBQUc7UUFDdkQ7UUFDQSxJQUNFLENBQUVaLFdBQVdHLGVBQ1pGLFVBQVUsQ0FBQ0ssY0FDWCxDQUFDRSxnQkFBZ0JDLGtCQUNsQjtZQUNBLE9BQU9wQixrRkFBWUEsQ0FBQ3FCLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLG1CQUFtQnBCLFFBQVFxQixHQUFHO1FBQ3JFO0lBQ0YsT0FBTztRQUNMLElBQUksQ0FBQ1YsY0FBYztZQUNqQixPQUFPYixrRkFBWUEsQ0FBQ3FCLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLFVBQVVwQixRQUFRcUIsR0FBRztRQUM1RDtJQUNGO0FBQ0Y7QUFFTyxNQUFNQyxTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0FBQ0gsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbWlkZGxld2FyZS50cz9kMTk5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICBjb25zdCBwYXRoID0gcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lO1xyXG4gIGNvbnN0IHRva2VuID0gcmVxdWVzdC5jb29raWVzLmdldChcImF1dGhvcml6YXRpb25cIik/LnZhbHVlO1xyXG4gIGNvbnN0IHJvbGUgPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KFwicm9sZVwiKT8udmFsdWU7XHJcblxyXG4gIGNvbnN0IGlzQWRtaW4gPSByb2xlID09PSBcIkFETUlOXCI7XHJcbiAgY29uc3QgaXNVc2VyID0gcm9sZSA9PT0gXCJVU0VSXCI7XHJcbiAgY29uc3QgaXNQdWJsaWNQYXRoID0gcGF0aCA9PT0gXCIvbG9naW5cIiB8fCBwYXRoID09PSBcIi9zdXBwb3J0XCI7XHJcbiAgY29uc3QgaXNBZG1pblBhdGggPSBwYXRoLmluY2x1ZGVzKFwiYWRtaW5cIik7XHJcbiAgY29uc3QgaXNTdGFmZlBhdGggPSBwYXRoID09PSBcIi9kc29cIjtcclxuICBjb25zdCBpc1VzZXJQYXRoID0gIShpc0FkbWluUGF0aCB8fCBpc1N0YWZmUGF0aCk7XHJcbiAgY29uc3QgaXNBdEhvbWUgPSBwYXRoID09PSBcIi9cIjtcclxuICAvLyB1cGRhdGUgdGhlIGJlbG93XHJcbiAgY29uc3QgaXNTdXBlckFkbWluID0gcm9sZSA9PT0gXCJBRE1JTlwiO1xyXG4gIGNvbnN0IGlzU3VwZXJBZG1pblBhdGggPSBwYXRoID09PSBcIi9hZG1pbi91bml2ZXJzaXR5XCI7XHJcblxyXG4gIGlmICh0b2tlbikge1xyXG4gICAgaWYgKGlzUHVibGljUGF0aCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvXCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgICB9XHJcbiAgICBpZiAoXHJcbiAgICAgICghaXNBZG1pbiAmJiBpc0FkbWluUGF0aCkgfHxcclxuICAgICAgKGlzVXNlciAmJiAhaXNVc2VyUGF0aCkgfHxcclxuICAgICAgKCFpc1N1cGVyQWRtaW4gJiYgaXNTdXBlckFkbWluUGF0aClcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvbm90LUF1dGhvcml6ZWRcIiwgcmVxdWVzdC51cmwpKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgaWYgKCFpc1B1YmxpY1BhdGgpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKFwiL2xvZ2luXCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIG1hdGNoZXI6IFtcclxuICAgIFwiL1wiLFxyXG4gICAgXCIvbm90Rm91bmRcIixcclxuICAgIFwiL25vdC1hdXRob3JpemVkXCIsXHJcbiAgICBcIi9pMjBcIixcclxuICAgIFwiL2kyMC9wcmUtcHJvY2Vzc29yXCIsXHJcbiAgICBcIi9pMjAvcG9zdC1wcm9jZXNzb3JcIixcclxuICAgIFwiL2FkbWluXCIsXHJcbiAgICBcIi9hZG1pbi91c2Vyc1wiLFxyXG4gICAgXCIvYWRtaW4vaW5zdGFuY2VcIixcclxuICAgIFwiL2FkbWluL2luc3RpdHV0aW9uXCIsXHJcbiAgICBcIi9kc29cIixcclxuICAgIFwiL2xvZ2luXCIsXHJcbiAgICBcIi9wcm9maWxlXCIsXHJcbiAgICBcIi9sb2dzXCIsXHJcbiAgXSxcclxufTtcclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwicGF0aCIsIm5leHRVcmwiLCJwYXRobmFtZSIsInRva2VuIiwiY29va2llcyIsImdldCIsInZhbHVlIiwicm9sZSIsImlzQWRtaW4iLCJpc1VzZXIiLCJpc1B1YmxpY1BhdGgiLCJpc0FkbWluUGF0aCIsImluY2x1ZGVzIiwiaXNTdGFmZlBhdGgiLCJpc1VzZXJQYXRoIiwiaXNBdEhvbWUiLCJpc1N1cGVyQWRtaW4iLCJpc1N1cGVyQWRtaW5QYXRoIiwicmVkaXJlY3QiLCJVUkwiLCJ1cmwiLCJjb25maWciLCJtYXRjaGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});